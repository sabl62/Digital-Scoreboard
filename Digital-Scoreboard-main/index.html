<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Scoreboard Control Center</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea, #764ba2);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: auto;
            background: white;
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        h1 {
            text-align: center;
            margin-bottom: 40px;
        }

        .teams-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap:    30px;
        }

        .team-control {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
        }

        .team-control.team1 {
            border-top: 5px solid #4CAF50;
        }

        .team-control.team2 {
            border-top: 5px solid #2196F3;
        }

        .score-display {
            font-size: 4em;
            text-align: center;
            margin: 20px 0;
        }

        button {
            padding: 12px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }

        .controls-section {
            text-align: center;
            margin-top: 30px;
        }

        .status {
            margin-top: 20px;
            text-align: center;
            font-weight: bold;
        }

        @media(max-width:768px) {
            .teams-section {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>
    <div class="container">
        <h1>üèÜ Scoreboard Control Center</h1>

        <!-- BASE API URL -->
        <input type="hidden" id="apiUrl" value="http://127.0.0.1:8000/api/scoreboard">

        <div class="teams-section">
            <div class="team-control team1">
                <h3>Team 1</h3>
                <input id="team1Name" value="Team 1">
                <div id="team1Score" class="score-display">0</div>
                <button onclick="changeScore('team1',1)">+1</button>
                <button onclick="changeScore('team1',2)">+2</button>
                <button onclick="changeScore('team1',3)">+3</button>
                <button onclick="changeScore('team1',-1)">-1</button>
            </div>

            <div class="team-control team2">
                <h3>Team 2</h3>
                <input id="team2Name" value="Team 2">
                <div id="team2Score" class="score-display">0</div>
                <button onclick="changeScore('team2',1)">+1</button>
                <button onclick="changeScore('team2',2)">+2</button>
                <button onclick="changeScore('team2',3)">+3</button>
                <button onclick="changeScore('team2',-1)">-1</button>
            </div>
        </div>

        <div class="controls-section">
            <button onclick="sendUpdate()">üì§ Update</button>
            <button onclick="resetScoreboard()">üîÑ Reset</button>
        </div>

        <div id="status" class="status"></div>
    </div>

    <script>
        const API_BASE = document.getElementById("apiUrl").value;

        let team1Score = 0;
        let team2Score = 0;

        function changeScore(team, value) {
            if (team === "team1") {
                team1Score = Math.max(0, team1Score + value);
                document.getElementById("team1Score").textContent = team1Score;
            } else {
                team2Score = Math.max(0, team2Score + value);
                document.getElementById("team2Score").textContent = team2Score;
            }
        }

        async function sendUpdate() {
            const payload = {
                team1_name: document.getElementById("team1Name").value,
                team2_name: document.getElementById("team2Name").value,
                team1_score: team1Score,
                team2_score: team2Score
            };

            try {
                await fetch(`${API_BASE}/update/`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });
                showStatus("‚úÖ Updated successfully");
            } catch {
                showStatus("‚ùå Update failed");
            }
        }

        async function resetScoreboard() {
            await fetch(`${API_BASE}/reset/`, { method: "POST" });
            team1Score = team2Score = 0;
            document.getElementById("team1Score").textContent = "0";
            document.getElementById("team2Score").textContent = "0";
            showStatus("üîÑ Reset complete");
        }

        function showStatus(msg) {
            const s = document.getElementById("status");
            s.textContent = msg;
            setTimeout(() => s.textContent = "", 3000);
        }
    </script>
</body>

</html>